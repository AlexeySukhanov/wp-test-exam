!function(n){function t(){n(".widget[id*='dd_last_viewed-']").each(function(){var t=n(this).find(".js-types-and-terms"),e=n(this).attr("id").split("-"),i=n(this).find(".js-exclude-ids");e=e[2],t.data("select2")||"__i__"===e||(t.select2({width:"100%"}),i.select2({tags:!0,tokenSeparators:[","," "],width:"100%",maximumSelectionLength:0,dropdownCss:{display:"none"},createTag:function(t){return isNaN(t.term)?null:{id:t.term,text:t.term}}}))})}n(document).ready(function(){t(),n(document).on("keypress",".exclude_ids .select2-search__field",function(){n(this).val(n(this).val().replace(/[^\d].+/,"")),((event.which<48||57<event.which)&&44!==event.which||!n(this).val()&&44===event.which)&&event.preventDefault()})}),n(document).on("widget-updated widget-added",function(){t()}),n(document).on("click",".dd-switch",function(){n(this).toggleClass("on"),n(this).next("input").trigger("click"),n(this).next('[id*="lastViewed_showExcerpt"]')&&n(this).parent().parent().next(".contentSettings").toggleClass("hidden")}),n(document).on("click",".lv_link",function(){n(this).toggleClass("button-primary"),n(this).next("input").trigger("click")}),n(document).on("click",".js-collapse",function(t){t.preventDefault(),n(this).next().toggleClass("visible")})}(jQuery);